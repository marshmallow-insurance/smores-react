{"version":3,"file":"Banner.stories-aea9ffef.js","sources":["../../src/Banner/BannerItem.tsx","../../src/Banner/BannerContainer.tsx","../../src/Banner/hooks.ts"],"sourcesContent":["import { Box } from '../Box'\nimport React, { FC } from 'react'\nimport styled, { css } from 'styled-components'\nimport { Icon } from '../Icon'\nimport { Color, theme } from '../theme'\nimport { Text } from '../Text'\nimport { Banner } from './types'\nimport { useTimeout } from '../hooks'\n\ntype StylesItem = {\n  iconColor: Color\n  backgroundColor: string\n  textColor: Color\n}\n\ntype BannerType = 'upsell' | 'critical' | 'general' | 'success'\n\nconst styles: Record<BannerType, StylesItem> = {\n  upsell: {\n    iconColor: 'liquorice',\n    backgroundColor: theme.colors.marshmallowPink,\n    textColor: 'liquorice',\n  },\n  critical: {\n    iconColor: 'mascarpone',\n    backgroundColor: theme.colors.strawberry,\n    textColor: 'mascarpone',\n  },\n  general: {\n    iconColor: 'mascarpone',\n    backgroundColor: theme.colors.liquorice,\n    textColor: 'mascarpone',\n  },\n  success: {\n    iconColor: 'mascarpone',\n    backgroundColor: theme.colors.apple,\n    textColor: 'mascarpone',\n  },\n}\n\ninterface Props extends Banner {\n  deleteBanner: (id: string) => void\n}\n\nexport const BannerItem: FC<Props> = ({\n  type,\n  autoCloseTime = 4,\n  id,\n  message,\n  topOffset,\n  exploreAction,\n  showExploreText,\n  showExploreIcon,\n  leadingIcon,\n  canManuallyClose,\n  showCloseIcon,\n  deleteBanner,\n  noTimeout,\n}) => {\n  const autoCloseBaner = () => {\n    if (noTimeout) return\n    if (type !== 'critical') return deleteBanner(id)\n    else {\n      return\n    }\n  }\n  useTimeout(() => autoCloseBaner(), autoCloseTime * 1000)\n\n  const textColor = styles[type].textColor\n  const iconColor = styles[type].iconColor\n\n  return (\n    <BannerWrapper\n      p=\"24px\"\n      mt={{ custom: topOffset }}\n      key={id}\n      flex\n      justifyContent=\"space-between\"\n      type={type}\n    >\n      <Box flex alignItems=\"center\">\n        {leadingIcon && (\n          <Icon mr=\"12px\" render={leadingIcon} size={24} color={iconColor} />\n        )}\n        <Text typo=\"headline-small\" color={textColor}>\n          {message}\n        </Text>\n      </Box>\n      <Box flex alignItems=\"center\">\n        {canManuallyClose && (\n          <GenericButton\n            onClick={() => deleteBanner(id)}\n            aria-label={`close banner ${message}`}\n          >\n            {showCloseIcon ? (\n              <Icon render=\"cross\" size={16} color={iconColor} />\n            ) : (\n              <UnderlinedText tag=\"span\" typo=\"desc-medium\" color={textColor}>\n                Dismiss\n              </UnderlinedText>\n            )}\n          </GenericButton>\n        )}\n        {exploreAction && (\n          <GenericButton onClick={exploreAction} aria-label={`cta ${message}`}>\n            <Box flex alignItems=\"center\">\n              {showExploreText && (\n                <UnderlinedText\n                  ml=\"12px\"\n                  tag=\"span\"\n                  typo=\"desc-medium\"\n                  color={textColor}\n                >\n                  Explore\n                </UnderlinedText>\n              )}\n              {showExploreIcon && (\n                <Icon\n                  render=\"arrow\"\n                  ml=\"12px\"\n                  size={24}\n                  color={iconColor}\n                  rotate={180}\n                />\n              )}\n            </Box>\n          </GenericButton>\n        )}\n      </Box>\n    </BannerWrapper>\n  )\n}\n\nconst BannerWrapper = styled(Box)<{ type: BannerType }>(\n  ({ type }) => css`\n    border-radius: 0px 0px 16px 16px;\n    background-color: ${styles[type].backgroundColor};\n  `,\n)\n\nconst GenericButton = styled.button`\n  cursor: pointer;\n`\n\nconst UnderlinedText = styled(Text)`\n  text-decoration: underline;\n`\n","import React, {\n  createContext,\n  FC,\n  useState,\n  useCallback,\n  ReactNode,\n  useContext,\n} from 'react'\nimport styled from 'styled-components'\nimport { BannerItem } from './BannerItem'\nimport { CreateBanner, Banner, BannerContextType } from './types'\n\nexport const BannerContext = createContext<BannerContextType>({\n  addBanner: () => {\n    throw new Error('Please add the BannerContainer to your application')\n  },\n})\n\nexport const useBannerContext = () => useContext(BannerContext)\n\nexport const BannerContainer: FC<{ children?: ReactNode }> = ({ children }) => {\n  let bannerId = 0\n  const [banner, setBanner] = useState<Banner[]>([])\n\n  // create banner unique ID\n  const newBannerId = useCallback(() => {\n    const newId = `MM_BANNER_${bannerId}`\n    bannerId++\n    return newId\n  }, [bannerId])\n\n  const addBanner = (banner: CreateBanner) => {\n    const newBanner = {\n      ...banner,\n      id: newBannerId(),\n    }\n    setBanner([newBanner])\n  }\n\n  const deleteBanner = (id: string) => {\n    setBanner(banner.filter((banner) => banner.id !== id))\n  }\n\n  return (\n    <BannerContext.Provider\n      value={{\n        addBanner,\n      }}\n    >\n      {children}\n      <BannerWrapper>\n        {banner.map((banner) => (\n          <BannerItem key={banner.id} {...banner} deleteBanner={deleteBanner} />\n        ))}\n      </BannerWrapper>\n    </BannerContext.Provider>\n  )\n}\n\nconst BannerWrapper = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  width: 100%;\n  z-index: 99;\n`\n","import { useBannerContext } from './BannerContainer'\n\nexport const useBanner = () => {\n  const { addBanner } = useBannerContext()\n\n  return { addBanner }\n}\n"],"names":["styles","theme","BannerItem","type","autoCloseTime","id","message","topOffset","exploreAction","showExploreText","showExploreIcon","leadingIcon","canManuallyClose","showCloseIcon","deleteBanner","noTimeout","autoCloseBaner","useTimeout","textColor","iconColor","jsxs","BannerWrapper","Box","jsx","Icon","Text","GenericButton","UnderlinedText","styled","css","BannerContext","createContext","useBannerContext","useContext","BannerContainer","children","bannerId","banner","setBanner","useState","newBannerId","useCallback","newId","addBanner","banner2","newBanner","useBanner"],"mappings":"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"}