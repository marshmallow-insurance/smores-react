{"version":3,"file":"Toggle.stories-8oqIZc2I.js","sources":["../../src/Toggle/Toggle.tsx","../../src/Toggle/storybook/Toggle.stories.tsx"],"sourcesContent":["import { FC } from 'react'\nimport styled, { css, useTheme } from 'styled-components'\n\nimport { Box } from '../Box'\nimport { focusOutline } from '../utils/focusOutline'\nimport { MarginProps } from '../utils/space'\nimport {\n  ColorTypes,\n  resolveToThemeColor,\n} from '../ThemeProvider/utils/colourMap'\n\nexport type Props = {\n  /** unique ID */\n  id?: string\n  /** checked flag  */\n  checked: boolean\n  disabled?: boolean\n  /** onToggle listener  */\n  onToggle: () => void\n  bgColor?: ColorTypes\n} & MarginProps\n\nexport const Toggle: FC<Props> = ({\n  id,\n  checked,\n  onToggle,\n  disabled,\n  bgColor,\n  ...marginProps\n}) => {\n  const theme = useTheme()\n\n  const resolvedBgColor = bgColor\n    ? resolveToThemeColor(bgColor, theme)\n    : undefined\n\n  return (\n    <Switch forwardedAs=\"label\" htmlFor={id} {...marginProps}>\n      <Checkbox\n        id={id}\n        disabled={disabled}\n        type=\"checkbox\"\n        checked={checked}\n        onChange={onToggle}\n        $bgColor={resolvedBgColor}\n        onKeyDown={(e) => {\n          if (e.key === 'Enter') {\n            onToggle()\n          }\n        }}\n        aria-label=\"toggle\"\n      />\n      <Slider $disabled={disabled} />\n    </Switch>\n  )\n}\n\nconst Switch = styled(Box)`\n  position: relative;\n  display: inline-block;\n  width: 56px;\n  height: 32px;\n\n  input {\n    opacity: 0;\n    width: 0;\n    height: 0;\n  }\n`\n\nconst Slider = styled.span<{ $disabled?: boolean }>`\n  position: absolute;\n  cursor: pointer;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: ${({ theme }) => theme.color.feedback.inactive[100]};\n  border: none;\n  border-radius: 28px;\n  transition: 0.2s background-color;\n  outline: none;\n\n  &:before {\n    position: absolute;\n    content: '';\n    height: 24px;\n    width: 24px;\n    left: 4px;\n    bottom: 4px;\n    background-color: ${({ theme }) => theme.color.surface.base[100]};\n    transition: 0.2s transform;\n    border-radius: 50%;\n  }\n\n  ${({ $disabled }) =>\n    $disabled\n      ? css`\n          cursor: not-allowed;\n        `\n      : css`\n          &:hover {\n            background-color: ${({ theme }) =>\n              theme.color.illustration.neutral[400]};\n          }\n        `}\n`\n\nconst Checkbox = styled.input<{ $bgColor?: string }>`\n  ${focusOutline({ selector: `&:focus-visible + ${Slider}` })}\n\n  &:checked + ${Slider} {\n    background-color: ${({ $bgColor, theme }) =>\n      $bgColor ? $bgColor : theme.color.feedback.positive[200]};\n    border: none;\n  }\n\n  &:checked + ${Slider}:before {\n    transform: translateX(24px);\n  }\n`\n","import { Meta, StoryObj } from '@storybook/react-vite'\nimport { useArgs } from 'storybook/preview-api'\nimport { expect, fn, userEvent, waitFor, within } from 'storybook/test'\nimport { colourOptions } from '../../utils/storybookHelpers/colourOptions'\nimport { Props, Toggle } from '../Toggle'\n\nconst Render = (args: Props) => {\n  const [{ checked }, updateArgs] = useArgs<Props>()\n\n  function onChange() {\n    args.onToggle()\n    updateArgs({ checked: !checked })\n  }\n\n  return <Toggle {...args} onToggle={onChange} checked={checked} />\n}\n\nconst meta: Meta<typeof Toggle> = {\n  title: 'Toggle',\n  component: Toggle,\n  decorators: [\n    (Story) => (\n      <div style={{ margin: '64px' }}>\n        <Story />\n      </div>\n    ),\n  ],\n  argTypes: {\n    bgColor: {\n      control: 'select',\n      options: colourOptions,\n    },\n  },\n}\n\nexport default meta\n\ntype Story = StoryObj<typeof Toggle>\n\nexport const Primary: Story = {\n  args: {\n    onToggle: fn(),\n    checked: true,\n  },\n  render: Render,\n  play: async ({ args, canvasElement }) => {\n    const canvas = within(canvasElement)\n    const checkbox = canvas.getByRole('checkbox', { name: 'toggle' })\n    await userEvent.click(checkbox)\n    await waitFor(() => expect(args.onToggle).toHaveBeenCalled())\n  },\n}\n\nexport const Disabled: Story = {\n  args: {\n    checked: false,\n    disabled: true,\n  },\n  render: Render,\n  play: async ({ canvasElement }) => {\n    const canvas = within(canvasElement)\n    const checkbox = canvas.getByRole('checkbox', { name: 'toggle' })\n    await userEvent.click(checkbox)\n    await expect(checkbox).toBeDisabled()\n  },\n}\n"],"names":["cov_2bed1qo1sj","actualCoverage","jsxs","Toggle","checked","onToggle","disabled","bgColor","marginProps","resolvedBgColor","useTheme","resolveToThemeColor","theme","htmlFor","children","jsx","Checkbox","type","onChange","$bgColor","onKeyDown","s","$disabled","color","feedback","surface","illustration","focusOutline","styled","selector","Slider","useArgs","expect","fn","userEvent","waitFor","within","Render","args","updateArgs","meta","title","component","decorators","Story","margin","argTypes","control","options","colourOptions","Primary","render","play","canvasElement","checkbox","getByRole","name","click","toHaveBeenCalled","Disabled","toBeDisabled","parameters","docs","source","originalSource"],"mappings":"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"}