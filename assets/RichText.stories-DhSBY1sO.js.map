{"version":3,"file":"RichText.stories-DhSBY1sO.js","sources":["../../src/RichText/RichText.tsx","../../src/RichText/storybook/RichText.stories.tsx"],"sourcesContent":["import domPurify from 'dompurify'\nimport { ForwardedRef, forwardRef } from 'react';\nimport styled from 'styled-components'\nimport { Box } from '../Box'\nimport { Icon } from '../Icon'\nimport { MarginProps } from '../utils/space'\n\nexport interface RichTextProps extends MarginProps {\n  htmlString: string\n}\n\nexport const RichText = forwardRef(function RichText(\n  { htmlString, ...props }: RichTextProps,\n  ref: ForwardedRef<HTMLDivElement>,\n) {\n  const sanitisedHtml = domPurify.sanitize(htmlString)\n\n  if (!domPurify.isSupported) {\n    return (\n      <Box {...props}>\n        <WarningText>\n          <Icon render=\"warning\" />\n          Your browser is not supported, please upgrade to a newer version\n        </WarningText>\n        {htmlString}\n      </Box>\n    )\n  } else {\n    return (\n      <HtmlBox\n        ref={ref}\n        {...props}\n        dangerouslySetInnerHTML={{ __html: sanitisedHtml }}\n      />\n    )\n  }\n})\n\nconst WarningText = styled(Box)`\n  background-color: ${({ theme }) => theme.color.feedback.negative[200]};\n  padding: 16px;\n  border-radius: 16px;\n  width: fit-content;\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  margin-bottom: 16px;\n`\n\nconst HtmlBox = styled(Box)`\n  * {\n    all: revert;\n  }\n`\n","import { Meta, StoryObj } from '@storybook/react'\nimport { RichText, RichTextProps } from '../RichText'\n\nconst meta: Meta<RichTextProps> = {\n  title: 'RichText',\n  component: RichText,\n  decorators: [\n    (Story) => (\n      <div style={{ margin: '64px' }}>\n        <Story />\n      </div>\n    ),\n  ],\n}\n\nexport default meta\n\ntype Story = StoryObj<RichTextProps>\n\nexport const Default: Story = {\n  args: {\n    htmlString:\n      '<h1>Header</h1><h2>Subheader</h2><p>A paragraph of text with a <a href=\"https://liamp.uk\">link</a></p>',\n  },\n}\n\nexport const Email: StoryObj = {\n  args: {\n    htmlString:\n      '<div dir=\"ltr\"><div>Testing some features of the rich text viewer. This is an example of an email sent from gmail.<br></div><div><ul><li style=\"margin-left:15px\">bullet</li><li style=\"margin-left:15px\">points<br></li></ul><div><ol><li style=\"margin-left:15px\">numbered</li><li style=\"margin-left:15px\">list</li></ol><div><font size=\"4\">Different</font> <b><i>text</i></b> <u style=\"background-color:rgb(200,200,0)\">formatting</u></div></div></div><div><br></div><span class=\"gmail_signature_prefix\">-- </span><br><div dir=\"ltr\" class=\"gmail_signature\" data-smartmail=\"gmail_signature\"><div dir=\"ltr\"><span style=\"color:rgb(100,100,100);font-family:Roboto,RobotoDraft,Helvetica,Arial,sans-serif\"><font size=\"4\"><b>Liam Piesley</b></font></span><div style=\"color:rgb(100,100,100);font-family:Roboto,RobotoDraft,Helvetica,Arial,sans-serif;font-size:12.8px\"><div>Software Engineer</div><div>Marshmallow</div><div><a href=\"http://www.marshmallow.com/\" rel=\"noreferrer\" style=\"color:rgb(17,85,204)\" target=\"_blank\">www.marshmallow.com</a></div><div><br></div><div><img src=\"https://i.imgur.com/psgAauI.png\" alt=\"marshmallow-logo\" width=\"200\" height=\"39\" style=\"height: 39px;\"><br></div></div></div></div></div>\\r\\n',\n  },\n}\n\nexport const AllElements: StoryObj = {\n  args: {\n    htmlString: `\n        <h1>H1 Header</h1>\n        <h2>H2 Header</h2>\n        <h3>H3 Header</h3>\n        <h4>H4 Header</h4>\n        <h5>H5 Header</h5>\n        <h6>H6 Header</h6>\n        <hr />\n        <h3>Image</h3>\n        <img src=\"https://www.gstatic.com/webp/gallery/1.sm.webp\" alt=\"mountain-img\" />\n        <h3>Paragraph</h3>\n        <p>Paragraph of text with <b>bold text</b>, <i>italic text</i>, <u>underlined text</u> and a  <a href='https://liamp.uk'>link</a>\n        <h3>List</h3>\n        <ul>\n          <li>Item 1</li>\n          <li>Item 2</li>\n          <li>Item 3</li>\n        </ul>\n        <h3>Table</h3>\n        <table style=\"border-collapse: collapse;\">\n          <tr>\n            <th style=\"padding: 8px; border: 1px solid black;\">heading 1</th>\n            <th style=\"padding: 8px; border: 1px solid black;\">heading 2</th>\n          </tr>\n          <tr>\n            <td style=\"padding: 8px; border: 1px solid black;\">cell 1</td>\n            <td style=\"padding: 8px; border: 1px solid black;\">cell 2</td>\n          </tr>\n          <tr>\n            <td style=\"padding: 8px; border: 1px solid black;\">cell 3</td>\n            <td style=\"padding: 8px; border: 1px solid black;\">cell 4</td>\n          </tr>\n        </table>\n        <h3>Dangerous html</h3>\n        <p><a href='javascript:alert(0)'>sanitised string with dangerous javascript</a></p>\n      `,\n  },\n}\n"],"names":["cov_2rp4ddcx41","actualCoverage","jsxs","htmlString","RichText","forwardRef","sanitisedHtml","domPurify","isSupported","s","jsx","HtmlBox","ref","dangerouslySetInnerHTML","__html","Box","children","WarningText","render","Icon","styled","theme","color","feedback","meta","title","component","decorators","Story","margin","Default","args","Email","AllElements","parameters","docs","source","originalSource"],"mappings":"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"}